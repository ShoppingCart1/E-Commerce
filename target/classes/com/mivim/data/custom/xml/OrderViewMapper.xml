<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mivim.data.custom.dao.OrderViewMapper">
	<resultMap id="BaseResultMap" type="com.mivim.data.custom.model.OrderView">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed Jul 19 
			11:59:46 IST 2017. -->
		<result column="orderId" jdbcType="VARCHAR" property="orderId" />
		<result column="itemId" jdbcType="VARCHAR" property="itemId" />
		<result column="orderDate" jdbcType="VARCHAR" property="orderDate" />
		<result column="totalPrice" jdbcType="VARCHAR" property="totalPrice" />
		<result column="quantity" jdbcType="VARCHAR" property="quantity" />
		<result column="updatedDate" jdbcType="DATE" property="updatedDate" />
		<result column="itemName" jdbcType="VARCHAR" property="itemName" />
		<result column="addressLine1" jdbcType="VARCHAR" property="addressLine1" />
		<result column="addressLine2" jdbcType="VARCHAR" property="addressLine2" />
		<result column="city" jdbcType="VARCHAR" property="city" />
		<result column="state" jdbcType="VARCHAR" property="state" />
		<result column="pincode" jdbcType="VARCHAR" property="pincode" />
		

	</resultMap>

	<select id="selectByExample" 
		resultMap="BaseResultMap" parameterType="java.lang.String">
		
SELECT A.pincode,A.state,
    A.city,
    A.addressLine1,
    A.addressLine2,O.orderId,O.itemId,O.orderDate,O.totalPrice,i.itemName,O.quantity from orderitem O,item i,orders OS,user u,
(select AD.pincode,
    AD.state,
    AD.city,
    AD.addressLine1,
    AD.addressLine2,SH.ID from address AD, shippingaddress SH where AD.ID=SH.ADDRESSID) as A
 WHERE O.ORDERID=OS.ID
and A.id=OS.shippingaddressid
and O.itemId=i.id
and u.id=OS.userid and u.id=#{userId};
		
	</select>
	<!-- <select id="selectByPrimaryKey" parameterType="java.lang.String"
		resultMap="BaseResultMap">
		WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed Jul 19 
			11:59:46 IST 2017.
		select
		<include refid="Base_Column_List" />
		from orderitem
		where Id = #{id,jdbcType=VARCHAR}
	</select>

	<select id="countByExample" parameterType="com.mivim.data.model.OrderitemExample"
		resultType="java.lang.Long">
		WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed Jul 19 
			11:59:46 IST 2017.
		select count(*) from orderitem
		<if test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
	</select>
 -->
</mapper>